<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>2d Binning — binningDepth2D • DepthProc</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="2d Binning — binningDepth2D" />
<meta property="og:description" content="A robust method of decreasing a sample size and therefore a complexity of a statistical procedure. The method may be used within a kernel density or a predictive distribution estimation." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DepthProc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/zzawadz/DepthProc">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>2d Binning</h1>
    <small class="dont-index">Source: <a href='https://github.com/zzawadz/DepthProc/blob/master/R/binningDepth2d.R'><code>R/binningDepth2d.R</code></a></small>
    <div class="hidden name"><code>binningDepth2D.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A robust method of decreasing a sample size and therefore a complexity of a statistical procedure. The method may be used within a kernel density or a predictive distribution estimation.</p>
    </div>

    <pre class="usage"><span class='fu'>binningDepth2D</span>(
  <span class='no'>x</span>,
  <span class='kw'>binmethod</span> <span class='kw'>=</span> <span class='st'>"LocDepth"</span>,
  <span class='kw'>nbins</span> <span class='kw'>=</span> <span class='fl'>8</span>,
  <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>remove_borders</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>depth_params</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"LP"</span>)
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>bivariate matrix containing data. Each row is viewed as one two-dimensional observation.</p></td>
    </tr>
    <tr>
      <th>binmethod</th>
      <td><p>A method for calculation center and dispersion measures. "LocDepth" uses location-scale depth, MAD uses median and MAD in each dimension.</p></td>
    </tr>
    <tr>
      <th>nbins</th>
      <td><p>number of bins in each dimension</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>responsible for tightness of bins.</p></td>
    </tr>
    <tr>
      <th>remove_borders</th>
      <td><p>Logical, include or not marginal bins</p></td>
    </tr>
    <tr>
      <th>depth_params</th>
      <td><p>other arguments passed to depthMedian</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>freq: a matrix containing the binned frequencies</p>
<p>mid_x: mid points for x</p>
<p>mid_y: mid points for y</p>
<p>breaks_x: breaks for x</p>
<p>breaks_y: breaks for y</p>
<p>input_data: max_depth_x and max_depth_y:</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Let us recall, that binning is a popular method of decreasing a sample size. To bin a window of \( n \) points \( {W}_{i, n} = \left\{ {X}_{i - n + 1}, ..., {X}_{i} \right\} \) to a grid \( {{{X}'}_{1}}, ..., {{{X}'}_{m}} \) we simply assign each sample point \( {{X}_{i}} \) to the nearest grid point \( {{{X}'}_{j}} \). When binning is completed, each grid point \( {{X}'}_{j} \) has an associated number \( {c}_{i} \), which is the sum of all the points that have been assigned to \( {{X}'}_{j} \). This procedure replaces the data \( {W}_{i, n} = \left\{ {X}_{i - n + 1}, ..., {X}_{i} \right\} \) with the smaller set \( {{W}'}_{j, m} = \left\{ {{X}'}_{j - m + 1}, ..., {{X}'}_{j} \right\} \). Although simple binning can speed up the computation, it is criticized for a lack of precise approximate control over the accuracy of the approximation. Robust binning however stresses properties of the majority of the data and decreases the computational complexity of the DSA at the same time.</p>
<p>For a 1D window \( {W}_{i, n} \), let \( {Z}_{i, n - k} \) denote a 2D window created basing on \( {W}_{i, n} \) and consisted of \( n - k \) pairs of observations and the \( k \) lagged observations \( {Z}_{i, n - k} = \left\{\left( {X}_{i - n - k}, {X}_{i - n + 1} \right)\right\}, 1\le i\le n - k \). Robust 2D binning of the \( {Z}_{i, n - p} \) is a very useful technique in a context of robust estimation of the predictive distribution of a time series (see <cite>Kosiorowski:2013b</cite>).</p>
<p>Assume we analyze a data stream \( \{{X}_{t}\} \) using a moving window of a fixed length \( n \), i.e., \( {W}_{i, n} \) and the derivative window \( {Z}_{i, n - 1} \). In a first step we calculate the weighted sample \( L ^ p \) depth for \( {W}_{i, n} \). Next we choose equally spaced grid of points \( {l}_{1}, ..., {l}_{m} \) in this way that \( [{{l}_{1}}, {{l}_{m}}] \times [{{l}_{1}}, {{l}_{m}}] \) covers fraction of the \( \beta \) central points of \( {Z}_{i, n - 1} \) w.r.t. the calculated \( L ^ p \) depth, i.e., it covers \( {R} ^ {\beta}({Z}_{i, n - 1}) \) for certain prefixed threshold \( \beta \in (0, 1) \). For both \( {X}_{t} \) and \( {X}_{t - 1} \) we perform a simple binning using following bins: \( (-\infty, {l}_{1}) \), \( ({l}_{1}, {l}_{2}) \), ..., \( ({l}_{m}, \infty) \). For robust binning we reject "border" classes and further use only midpoints and binned frequencies for classes \( ({l}_{1}, {l}_{2}) \), \( ({l}_{2}, {l}_{3}) \), ..., \( ({l}_{m - 1}, {l}_{m}) \).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Hall, P., Wand, M. P. (1996) On the Accuracy of Binned Kernel Density Estimators, Journal of Multivariate Analysis archive, Volume 56 Issue 2, 165--184</p>
<p>Holmstrom, L. (2000) The Accuracy and the Computational Complexity of a Multivariate Binned Kernel Density Estimator, Journal of Multivariate Analysis, Volume 72, Issue 2, 264--309, <a href='http://dx.doi.org/10.1006/jmva.1999.1863'>http://dx.doi.org/10.1006/jmva.1999.1863</a>. (<a href='http://www.sciencedirect.com/science/article/pii/S0047259X99918638'>http://www.sciencedirect.com/science/article/pii/S0047259X99918638</a>)</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='depth.html'>depth</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># EXAMPLE 1</span>
<span class='no'>Sigma1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>10</span>, <span class='fl'>3</span>, <span class='fl'>3</span>, <span class='fl'>2</span>), <span class='fl'>2</span>, <span class='fl'>2</span>)
<span class='no'>X1</span> <span class='kw'>&lt;-</span> <span class='fu'>mvrnorm</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>8500</span>, <span class='kw'>mu</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>0</span>), <span class='no'>Sigma1</span>)
<span class='no'>Sigma2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>2</span>), <span class='fl'>2</span>, <span class='fl'>2</span>)
<span class='no'>X2</span> <span class='kw'>&lt;-</span> <span class='fu'>mvrnorm</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1500</span>, <span class='kw'>mu</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>10</span>, <span class='fl'>6</span>), <span class='no'>Sigma2</span>)
<span class='no'>BALLOT</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span>(<span class='no'>X1</span>, <span class='no'>X2</span>)
<span class='no'>train</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>10000</span>, <span class='fl'>500</span>)
<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='no'>BALLOT</span>[<span class='no'>train</span>, ]
<span class='fu'><a href='plot-methods.html'>plot</a></span>(<span class='no'>data</span>)</div><div class='img'><img src='binningDepth2D-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='no'>b1</span> <span class='kw'>&lt;-</span> <span class='fu'>binningDepth2D</span>(<span class='no'>data</span>, <span class='kw'>remove_borders</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>nbins</span> <span class='kw'>=</span> <span class='fl'>12</span>, <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='no'>b2</span> <span class='kw'>&lt;-</span> <span class='fu'>binningDepth2D</span>(<span class='no'>data</span>, <span class='kw'>nbins</span> <span class='kw'>=</span> <span class='fl'>12</span>, <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>remove_borders</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='plot-methods.html'>plot</a></span>(<span class='no'>b1</span>)</div><div class='img'><img src='binningDepth2D-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='plot-methods.html'>plot</a></span>(<span class='no'>b2</span>)</div><div class='img'><img src='binningDepth2D-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># EXAMPLE 2</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>under5.mort</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>maesles.imm</span>)
<span class='no'>data2011</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='no'>under5.mort</span>[, <span class='fl'>22</span>], <span class='no'>maesles.imm</span>[, <span class='fl'>22</span>])
<span class='fu'><a href='plot-methods.html'>plot</a></span>(<span class='fu'>binningDepth2D</span>(<span class='no'>data2011</span>, <span class='kw'>nbins</span> <span class='kw'>=</span> <span class='fl'>8</span>, <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>remove_borders</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='img'><img src='binningDepth2D-4.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Daniel Kosiorowski and Zygmunt Zawadzki from Cracow University of Economics.</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Zygmunt Zawadzki, Daniel Kosiorowski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


